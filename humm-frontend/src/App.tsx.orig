import React, { Component } from "react";
<<<<<<< HEAD
import logo from "./images/logo/2x/humm_logo@2x.png";
import "./App.css";
import axios from "axios";
import "bootstrap/dist/css/bootstrap.css";
import Navbar from "./navbar";
import ChatWindow from "./chat-window";

interface AppProps {}

interface AppState {}
=======
import logo from "./logo.svg";
import "./App.css";
import axios from "axios";

interface AppProps {}

interface AppState {
  messages: message[];
}
>>>>>>> 5868d5b57c9787cb7e93771207fdd07ebba32fe6

class App extends Component<AppProps, AppState> {
  constructor(props: AppProps) {
    super(props);

<<<<<<< HEAD
    this.state = {};
=======
    this.state = {
      messages: [],
    };
  }

  state: AppState = {
    messages: [],
  };

  renderMessages = () => {
    return this.state.messages.map((message) => {
      <h2>{message.text_author + ": " + message.text_contents}</h2>;
    });
  };

  sendMessage(event: React.FormEvent<HTMLFormElement>) {
    event.preventDefault();

    let message: message = {
      text_contents: event.currentTarget.message.value,
      text_date: new Date().toISOString(),
      text_author: "me",
    };

    this.state.messages.push(message);
    this.setState({ messages: this.state.messages });

    axios
      .post("http://localhost:8000/bot_analysis/", message)
      .then((res) => {
        let response_text = res.data;
        let response: message = {
          text_contents: response_text,
          text_date: new Date().toISOString(),
          text_author: 'bot',
        }
        this.state.messages.push(response);
        this.setState({ messages: this.state.messages });
      })
      .catch((err) => console.log(err));
>>>>>>> 5868d5b57c9787cb7e93771207fdd07ebba32fe6
  }

  render() {
    return (
<<<<<<< HEAD
      <main className="vh-50">
        <Navbar />
        <div className="row">
          <div className="col-4"></div>
          <div className="col-4 d-flex justify-content-center">
            <img className="my-2 img-fluid" src={logo}></img>
          </div>
          <div className="col-4"></div>
        </div>
        <ChatWindow></ChatWindow>
=======
      <main className="container">
        <h1>Humm Chatbot</h1>
        <div className="messages">
          {this.state.messages.map((message) => {
            return (
              <div key={message.text_date}>
                {message.text_author + ": " + message.text_contents}
              </div>
            );
          })}
        </div>
        <form onSubmit={(event) => this.sendMessage(event)}>
          <input type="text" name="message"></input>
          <input type="submit"></input>
        </form>
>>>>>>> 5868d5b57c9787cb7e93771207fdd07ebba32fe6
      </main>
    );
  }
}

export default App;
